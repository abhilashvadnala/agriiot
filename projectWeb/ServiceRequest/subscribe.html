<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Cinzel|Play&display=swap" rel="stylesheet">
    <link href="../css/main.css" rel="stylesheet">
    <link href="../css/form.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <style>
         body{background-image:url(https://drive.google.com/uc?export=download&id=19AfvU5NCtSvDros49Jx8V4SyJeJ0_mi-);
             background-size:cover;
             background-position:center;
          }
          .formEle input,.formEle select{
              width:200px;
              display: inline-block;
          }
      </style>
   </head>
   <body>
       
              
      <table style="height:100%;width:100%;">
         <tbody>
            <tr>
               <td valign="middle">
                  <div class="formDiv" style="margin-left: 100px;">
                    <h2 class="heading" style="
                                margin: 0;
                                text-align: center;
                                display: block;
                            ">Service Request Create</h2>
                      <form id="myForm" action="#" method="POST" onsubmit="event.preventDefault(); validateMyForm();">
                            
                          <div id="formElements">
                            <div class="formEle">
                                <select name="ThingType[]" >
                                    <optgroup label="Sensor">
                                        <option value="ssm">Soil Moisture</option>
                                        <option value="ssm">Temperature</option>
                                        <option value="ssm">Fire Alert</option>
                                        <option value="ssm">Sun Light</option>
                                        <option value="ssm">pH Sensor</option>
                                        <option value="ssm">Location</option>
                                    </optgroup>
                                    <optgroup label="Actuator">
                                        <option value="ssm">Water Dispenser</option>
                                        <option value="ssm">Temperature Control</option>
                                        <option value="ssm">Water Dispenser</option>
                                        <option value="ssm">Greenhouse roof</option>
                                        <option value="ssm">Fertilizer Dispenser</option>
                                        <option value="ssm">Drone Camera</option>
                                    </optgroup>
                                </select>
                                <input name="ThingQuantity[]" placeholder="ThingQuantity" >
                            </div>
                          </div>

                          <br>
                          <br>
                          <a href="javascript:(function(){formEleA();})()">Add Thing Type</a>

                            <br><br>
                            
                            <button name="submit" value="yes" id="submit_button">Create Service Request</button>

                        </form>
                  </div>
               </td>
            </tr>
         </tbody>
      </table>
       <script src="../js/all.js"></script>
        <script>
            var formEle = "<br><div class='formEle'>" + $(".formEle").eq(0).html() + "</div>";
            
            function formEleA(){
                $("#formElements").append(formEle);
            }

            $("#submit_button").click(function(link){
                submitForm();
            });
            function submitForm(){
                alert(JSON.stringify(getFormData($("#myForm"))));
                $.post("/servicerequest/create/",getFormData($("#myForm")),function(data){
                    if(data.success){
                        window.location = "../User/Farmer/Dashboard.html";
                    }else{
                        alert("Please try again.");
                    }
                });
            }
        </script>
   </body>
</html>